package com.unrealedz.wstation;

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;



public class ForecastWidget extends AppWidgetProvider {
	
	private PendingIntent pIntentService = null;  
	  
    @Override  
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)  
    {  
      
    	RemoteViews widgetView = new RemoteViews(context.getPackageName(),
	            R.layout.widget);
    	
    	ComponentName service = new ComponentName(context, UpdateService.class);		  
		  Intent intentStop = new Intent(UpdateService.FROM_WIDGET).setComponent(service);
		  PendingIntent pIntentStop = PendingIntent.getService(context, 0, intentStop, 0);	    
		  widgetView.setOnClickPendingIntent(R.id.button1, pIntentStop);
		  
    	/* final AlarmManager m = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);   
        
        final Calendar TIME = Calendar.getInstance();  
        TIME.set(Calendar.MINUTE, 0);  
        TIME.set(Calendar.SECOND, 0);  
        TIME.set(Calendar.MILLISECOND, 0);
        
        ComponentName service = new ComponentName(context,
        		UpdateService.class);
  
      //  final Intent i = new Intent(context, UpdateService.class);  
        final Intent i = new Intent(UpdateService.FROM_WIDGET).setComponent(service);  
        if (pIntentService == null)  
        {  
        	pIntentService = PendingIntent.getService(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT);  
        }  
  
        m.setRepeating(AlarmManager.RTC, TIME.getTime().getTime(), 1000 * 60, pIntentService);  */
    }
    
    @Override  
    public void onDisabled(Context context)  
    {  
       /* final AlarmManager m = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);  
  
        m.cancel(pIntentService);  */
    }  

}
